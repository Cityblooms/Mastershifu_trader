<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KILLER ZONE - Multi-Asset RSI Signals</title>
    <style>
        :root {
            --bg-dark: #0a0e23;
            --panel-bg: #151a35;
            --accent-gold: #FFD700;
            --buy-green: #00C853;
            --sell-red: #FF3D00;
            --strong-buy: #00E676;
            --strong-sell: #FF5252;
            --pending: #2196F3;
            --text-white: #FFFFFF;
            --text-gray: #B0B0B0;
            --border-radius: 12px;
            --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-dark);
            color: var(--text-white);
            line-height: 1.4;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #1a1f3d 0%, #0a0e23 100%);
            padding: 15px 20px;
            text-align: center;
            border-bottom: 2px solid var(--accent-gold);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            color: var(--accent-gold);
            font-size: 1.3rem;
            margin-bottom: 5px;
        }
        
        .header p {
            color: var(--text-gray);
            font-size: 0.85rem;
        }
        
        /* Sync Status */
        .sync-status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 8px;
            font-size: 0.8rem;
        }
        
        .sync-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .sync-dot.synced {
            background: var(--buy-green);
            animation: pulse 2s infinite;
        }
        
        .sync-dot.syncing {
            background: #FF9800;
            animation: pulse 1s infinite;
        }
        
        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px;
        }
        
        /* Assets Grid */
        .assets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .assets-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Asset Card */
        .asset-card {
            background: var(--panel-bg);
            border-radius: var(--border-radius);
            padding: 15px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .asset-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
        }
        
        .asset-card.active {
            border-color: var(--accent-gold);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), transparent);
        }
        
        /* Signal States */
        .asset-card.buy-signal {
            border-color: var(--buy-green);
            background: linear-gradient(135deg, rgba(0, 200, 83, 0.1), transparent);
        }
        
        .asset-card.sell-signal {
            border-color: var(--sell-red);
            background: linear-gradient(135deg, rgba(255, 61, 0, 0.1), transparent);
        }
        
        .asset-card.strong-buy-signal {
            border-color: var(--strong-buy);
            background: linear-gradient(135deg, rgba(0, 230, 118, 0.15), transparent);
            animation: strongPulse 3s infinite;
        }
        
        .asset-card.strong-sell-signal {
            border-color: var(--strong-sell);
            background: linear-gradient(135deg, rgba(255, 82, 82, 0.15), transparent);
            animation: strongPulse 3s infinite;
        }
        
        /* Asset Header */
        .asset-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .asset-name-section {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .asset-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .asset-details {
            flex: 1;
        }
        
        .asset-name {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .asset-symbol {
            color: var(--text-gray);
            font-size: 0.85rem;
        }
        
        /* Signal Badge */
        .signal-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .buy-badge {
            background: var(--buy-green);
            color: #000;
        }
        
        .sell-badge {
            background: var(--sell-red);
            color: #fff;
        }
        
        .strong-buy-badge {
            background: var(--strong-buy);
            color: #000;
            animation: textGlow 2s infinite;
        }
        
        .strong-sell-badge {
            background: var(--strong-sell);
            color: #000;
            animation: textGlow 2s infinite;
        }
        
        .pending-badge {
            background: var(--pending);
            color: #fff;
        }
        
        /* RSI Display */
        .rsi-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
        }
        
        .rsi-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .rsi-label {
            color: var(--text-gray);
            font-size: 0.9rem;
        }
        
        .rsi-value {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .rsi-oversold {
            color: var(--strong-buy);
        }
        
        .rsi-overbought {
            color: var(--strong-sell);
        }
        
        .rsi-neutral {
            color: var(--text-gray);
        }
        
        /* RSI Progress Bar */
        .rsi-progress {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }
        
        .rsi-progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease;
        }
        
        .progress-buy {
            background: linear-gradient(90deg, var(--strong-buy), var(--buy-green));
        }
        
        .progress-sell {
            background: linear-gradient(90deg, var(--sell-red), var(--strong-sell));
        }
        
        .progress-neutral {
            background: linear-gradient(90deg, var(--buy-green), var(--text-gray), var(--sell-red));
        }
        
        /* Timeframe Signals */
        .timeframe-signals {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 12px;
        }
        
        .tf-signal {
            text-align: center;
            padding: 6px;
            border-radius: 6px;
            font-size: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .tf-buy {
            background: rgba(0, 200, 83, 0.2);
            color: var(--buy-green);
        }
        
        .tf-sell {
            background: rgba(255, 61, 0, 0.2);
            color: var(--sell-red);
        }
        
        .tf-strong-buy {
            background: rgba(0, 230, 118, 0.3);
            color: var(--strong-buy);
            font-weight: 600;
        }
        
        .tf-strong-sell {
            background: rgba(255, 82, 82, 0.3);
            color: var(--strong-sell);
            font-weight: 600;
        }
        
        /* Signal Info */
        .signal-info {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .signal-type {
            color: var(--text-gray);
            font-size: 0.85rem;
            margin-bottom: 5px;
        }
        
        .signal-confidence {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
        }
        
        .confidence-bar {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .confidence-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.5s ease;
        }
        
        .confidence-high {
            background: var(--buy-green);
        }
        
        .confidence-medium {
            background: #FF9800;
        }
        
        .confidence-low {
            background: var(--text-gray);
        }
        
        /* Chart Section */
        .chart-section {
            background: var(--panel-bg);
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }
        
        .chart-header {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .chart-title {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .chart-controls {
            display: flex;
            gap: 10px;
        }
        
        .timeframe-selector {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 4px;
        }
        
        .tf-btn {
            padding: 6px 12px;
            background: transparent;
            border: none;
            color: var(--text-gray);
            font-size: 0.8rem;
            border-radius: 6px;
            cursor: pointer;
            min-width: 40px;
            transition: all 0.3s;
        }
        
        .tf-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .tf-btn.active {
            background: var(--accent-gold);
            color: #000;
            font-weight: 600;
        }
        
        .chart-display {
            height: 400px;
            position: relative;
        }
        
        #tradingview_chart {
            width: 100%;
            height: 100%;
        }
        
        /* RSI Zones */
        .rsi-zones {
            background: var(--panel-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
        }
        
        .zones-title {
            text-align: center;
            color: var(--accent-gold);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .zones-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        @media (min-width: 576px) {
            .zones-container {
                flex-direction: row;
            }
        }
        
        .zone {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .zone-extreme-buy {
            background: linear-gradient(135deg, #00E67620, transparent);
            border: 2px solid var(--strong-buy);
            color: var(--strong-buy);
        }
        
        .zone-buy {
            background: linear-gradient(135deg, #00C85320, transparent);
            border: 2px solid var(--buy-green);
            color: var(--buy-green);
        }
        
        .zone-neutral {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: var(--text-gray);
        }
        
        .zone-sell {
            background: linear-gradient(135deg, #FF3D0020, transparent);
            border: 2px solid var(--sell-red);
            color: var(--sell-red);
        }
        
        .zone-extreme-sell {
            background: linear-gradient(135deg, #FF525220, transparent);
            border: 2px solid var(--strong-sell);
            color: var(--strong-sell);
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: var(--text-gray);
            font-size: 0.8rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Animations */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        @keyframes strongPulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 230, 118, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(0, 230, 118, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 230, 118, 0); }
        }
        
        @keyframes textGlow {
            0% { text-shadow: 0 0 5px currentColor; }
            50% { text-shadow: 0 0 15px currentColor; }
            100% { text-shadow: 0 0 5px currentColor; }
        }
        
        /* Mobile Optimizations */
        @media (max-width: 576px) {
            .container {
                padding: 15px 10px;
            }
            
            .chart-display {
                height: 300px;
            }
            
            .timeframe-selector {
                overflow-x: auto;
                padding-bottom: 5px;
            }
            
            .asset-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .signal-badge {
                align-self: flex-start;
            }
        }
    </style>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1><i class="fas fa-bolt"></i> KILLER ZONE RSI SYSTEM</h1>
        <p>Multi-Asset â€¢ Multi-Timeframe â€¢ Real-time RSI Signals</p>
        <div class="sync-status">
            <div class="sync-dot syncing" id="sync-status"></div>
            <span id="sync-text">SYNCING ALL ASSETS...</span>
        </div>
    </div>
    
    <!-- Main Container -->
    <div class="container">
        <!-- Assets Grid -->
        <div class="assets-grid" id="assets-grid">
            <!-- Assets will be dynamically loaded here -->
        </div>
        
        <!-- Chart Section -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title" id="chart-title">BITCOIN (BTC/USD) - 15M Chart</div>
                <div class="chart-controls">
                    <div class="timeframe-selector">
                        <button class="tf-btn" data-tf="1">1M</button>
                        <button class="tf-btn" data-tf="5">5M</button>
                        <button class="tf-btn active" data-tf="15">15M</button>
                        <button class="tf-btn" data-tf="60">1H</button>
                        <button class="tf-btn" data-tf="240">4H</button>
                        <button class="tf-btn" data-tf="D">D</button>
                    </div>
                </div>
            </div>
            <div class="chart-display">
                <div id="tradingview_chart"></div>
            </div>
        </div>
        
        <!-- RSI Zones -->
        <div class="rsi-zones">
            <div class="zones-title">KILLER ZONE SIGNAL THRESHOLDS</div>
            <div class="zones-container">
                <div class="zone zone-extreme-buy">EXTREME BUY<br>RSI â‰¤ 25</div>
                <div class="zone zone-buy">BUY ZONE<br>RSI 26-35</div>
                <div class="zone zone-neutral">NEUTRAL<br>RSI 36-64</div>
                <div class="zone zone-sell">SELL ZONE<br>RSI 65-74</div>
                <div class="zone zone-extreme-sell">EXTREME SELL<br>RSI â‰¥ 75</div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <div class="footer">
        Â© 2024 KILLER ZONE Trading System â€¢ All assets monitored in real-time
    </div>

    <script>
        // KILLER ZONE Multi-Asset RSI System
        const KillerZoneSystem = {
            // Current state
            currentAsset: 'BTCUSD',
            currentTimeframe: '15',
            tvWidget: null,
            isChartLoaded: false,
            
            // RSI Thresholds
            rsiThresholds: {
                extremeBuy: 25,
                buyZone: 35,
                neutralUpper: 64,
                neutralLower: 36,
                sellZone: 65,
                extremeSell: 75
            },
            
            // All assets with multi-timeframe data
            assets: [
                {
                    id: 1,
                    symbol: 'BTCUSD',
                    name: 'BITCOIN',
                    tvSymbol: 'BITSTAMP:BTCUSD',
                    icon: 'fab fa-bitcoin',
                    type: 'crypto',
                    basePrice: 45000,
                    rsiData: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    signals: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    price: null,
                    lastUpdate: null
                },
                {
                    id: 2,
                    symbol: 'ETHUSD',
                    name: 'ETHEREUM',
                    tvSymbol: 'BITSTAMP:ETHUSD',
                    icon: 'fab fa-ethereum',
                    type: 'crypto',
                    basePrice: 2400,
                    rsiData: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    signals: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    price: null,
                    lastUpdate: null
                },
                {
                    id: 3,
                    symbol: 'XAUUSD',
                    name: 'GOLD',
                    tvSymbol: 'FX_IDC:XAUUSD',
                    icon: 'fas fa-gem',
                    type: 'commodity',
                    basePrice: 1950,
                    rsiData: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    signals: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    price: null,
                    lastUpdate: null
                },
                {
                    id: 4,
                    symbol: 'EURUSD',
                    name: 'EUR/USD',
                    tvSymbol: 'FX:EURUSD',
                    icon: 'fas fa-euro-sign',
                    type: 'forex',
                    basePrice: 1.08,
                    rsiData: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    signals: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    price: null,
                    lastUpdate: null
                },
                {
                    id: 5,
                    symbol: 'NAS100',
                    name: 'NASDAQ 100',
                    tvSymbol: 'NASDAQ:NDX',
                    icon: 'fas fa-chart-line',
                    type: 'index',
                    basePrice: 16000,
                    rsiData: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    signals: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    price: null,
                    lastUpdate: null
                },
                {
                    id: 6,
                    symbol: 'US30',
                    name: 'DOW JONES',
                    tvSymbol: 'DOWI:DJI',
                    icon: 'fas fa-industry',
                    type: 'index',
                    basePrice: 34000,
                    rsiData: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    signals: {
                        '1': null, '5': null, '15': null, '60': null, '240': null, 'D': null
                    },
                    price: null,
                    lastUpdate: null
                }
            ],
            
            // Initialize system
            async init() {
                console.log('ðŸš€ KILLER ZONE System Initializing...');
                
                // Initialize all assets
                this.initializeAssets();
                
                // Setup event listeners
                this.setupEventListeners();
                
                // Load assets display
                this.loadAssetsDisplay();
                
                // Load TradingView chart
                await this.loadTradingViewChart();
                
                // Start monitoring all assets
                this.startAssetMonitoring();
                
                // Update sync status
                this.updateSyncStatus('synced');
                
                console.log('âœ… KILLER ZONE System Ready - Monitoring all assets');
            },
            
            // Initialize assets with starting values
            initializeAssets() {
                this.assets.forEach(asset => {
                    // Initialize price
                    asset.price = asset.basePrice;
                    
                    // Initialize RSI for all timeframes with realistic values
                    Object.keys(asset.rsiData).forEach(tf => {
                        const baseRSI = 45 + (Math.random() * 10); // Start between 45-55
                        asset.rsiData[tf] = parseFloat(baseRSI.toFixed(2));
                        asset.signals[tf] = null;
                    });
                    
                    asset.lastUpdate = new Date();
                });
            },
            
            // Setup event listeners
            setupEventListeners() {
                // Timeframe buttons
                document.querySelectorAll('.tf-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const timeframe = btn.dataset.tf;
                        this.changeTimeframe(timeframe, btn);
                    });
                });
            },
            
            // Update sync status
            updateSyncStatus(status) {
                const syncDot = document.getElementById('sync-status');
                const syncText = document.getElementById('sync-text');
                
                syncDot.className = `sync-dot ${status}`;
                
                if (status === 'synced') {
                    syncText.textContent = 'ALL ASSETS SYNCED';
                } else {
                    syncText.textContent = 'SYNCING ALL ASSETS...';
                }
            },
            
            // Load assets display
            loadAssetsDisplay() {
                const assetsGrid = document.getElementById('assets-grid');
                assetsGrid.innerHTML = this.assets.map(asset => this.createAssetCard(asset)).join('');
                
                // Add click events to asset cards
                document.querySelectorAll('.asset-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        const symbol = card.dataset.symbol;
                        this.selectAsset(symbol);
                    });
                });
            },
            
            // Create asset card HTML
            createAssetCard(asset) {
                // Get aggregate signal from all timeframes
                const aggregateSignal = this.getAggregateSignal(asset);
                const cardClass = this.getCardClass(aggregateSignal);
                const badge = this.getSignalBadge(aggregateSignal);
                
                // Get RSI for current timeframe
                const currentRSI = asset.rsiData[this.currentTimeframe] || 50;
                const rsiColor = this.getRSIColor(currentRSI);
                const progressWidth = currentRSI;
                const progressClass = this.getProgressClass(currentRSI);
                
                // Format price
                const priceFormatted = asset.type === 'forex' 
                    ? asset.price.toFixed(4) 
                    : asset.price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                
                return `
                    <div class="asset-card ${cardClass}" data-symbol="${asset.symbol}">
                        <div class="asset-header">
                            <div class="asset-name-section">
                                <div class="asset-icon">
                                    <i class="${asset.icon}"></i>
                                </div>
                                <div class="asset-details">
                                    <div class="asset-name">${asset.name}</div>
                                    <div class="asset-symbol">${asset.symbol}</div>
                                </div>
                            </div>
                            <div class="signal-badge ${badge.class}">
                                ${badge.text}
                            </div>
                        </div>
                        
                        <div class="rsi-section">
                            <div class="rsi-header">
                                <div class="rsi-label">RSI (${this.currentTimeframe}M)</div>
                                <div class="rsi-value ${rsiColor}">${currentRSI}</div>
                            </div>
                            <div class="rsi-progress">
                                <div class="rsi-progress-fill ${progressClass}" style="width: ${progressWidth}%"></div>
                            </div>
                        </div>
                        
                        <div class="timeframe-signals">
                            ${this.createTimeframeSignals(asset)}
                        </div>
                        
                        <div class="signal-info">
                            <div class="signal-type">${this.getSignalReason(aggregateSignal, currentRSI)}</div>
                            <div class="signal-confidence">
                                <span>Confidence:</span>
                                <div class="confidence-bar">
                                    <div class="confidence-fill ${this.getConfidenceClass(aggregateSignal)}" 
                                         style="width: ${this.getConfidencePercent(aggregateSignal)}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            },
            
            // Create timeframe signals display
            createTimeframeSignals(asset) {
                const timeframes = ['1', '5', '15', '60', '240', 'D'];
                return timeframes.map(tf => {
                    const signal = asset.signals[tf];
                    const rsi = asset.rsiData[tf];
                    
                    let tfClass = '';
                    let tfText = `${tf}${tf === 'D' ? '' : 'M'}`;
                    
                    if (signal) {
                        if (signal.type === 'STRONG_BUY') tfClass = 'tf-strong-buy';
                        else if (signal.type === 'STRONG_SELL') tfClass = 'tf-strong-sell';
                        else if (signal.type === 'BUY') tfClass = 'tf-buy';
                        else if (signal.type === 'SELL') tfClass = 'tf-sell';
                        tfText += `: ${rsi}`;
                    } else {
                        tfText += `: ${rsi || '--'}`;
                    }
                    
                    return `<div class="tf-signal ${tfClass}">${tfText}</div>`;
                }).join('');
            },
            
            // Get aggregate signal from all timeframes
            getAggregateSignal(asset) {
                const signals = Object.values(asset.signals).filter(s => s !== null);
                
                if (signals.length === 0) return null;
                
                // Count signal types
                const signalCounts = {
                    'STRONG_BUY': 0,
                    'STRONG_SELL': 0,
                    'BUY': 0,
                    'SELL': 0
                };
                
                signals.forEach(signal => {
                    if (signalCounts[signal.type] !== undefined) {
                        signalCounts[signal.type]++;
                    }
                });
                
                // Find strongest signal
                if (signalCounts.STRONG_BUY > 0) return { type: 'STRONG_BUY', count: signalCounts.STRONG_BUY };
                if (signalCounts.STRONG_SELL > 0) return { type: 'STRONG_SELL', count: signalCounts.STRONG_SELL };
                if (signalCounts.BUY > signalCounts.SELL) return { type: 'BUY', count: signalCounts.BUY };
                if (signalCounts.SELL > signalCounts.BUY) return { type: 'SELL', count: signalCounts.SELL };
                
                return null;
            },
            
            // Get card class based on signal
            getCardClass(signal) {
                if (!signal) return '';
                
                switch(signal.type) {
                    case 'STRONG_BUY': return 'strong-buy-signal';
                    case 'STRONG_SELL': return 'strong-sell-signal';
                    case 'BUY': return 'buy-signal';
                    case 'SELL': return 'sell-signal';
                    default: return '';
                }
            },
            
            // Get signal badge
            getSignalBadge(signal) {
                if (!signal) return { class: 'pending-badge', text: 'ANALYZING' };
                
                switch(signal.type) {
                    case 'STRONG_BUY': return { class: 'strong-buy-badge', text: 'STRONG BUY' };
                    case 'STRONG_SELL': return { class: 'strong-sell-badge', text: 'STRONG SELL' };
                    case 'BUY': return { class: 'buy-badge', text: 'BUY' };
                    case 'SELL': return { class: 'sell-badge', text: 'SELL' };
                    default: return { class: 'pending-badge', text: 'ANALYZING' };
                }
            },
            
            // Get RSI color
            getRSIColor(rsi) {
                if (rsi <= this.rsiThresholds.extremeBuy) return 'rsi-oversold';
                if (rsi <= this.rsiThresholds.buyZone) return 'rsi-oversold';
                if (rsi >= this.rsiThresholds.extremeSell) return 'rsi-overbought';
                if (rsi >= this.rsiThresholds.sellZone) return 'rsi-overbought';
                return 'rsi-neutral';
            },
            
            // Get progress bar class
            getProgressClass(rsi) {
                if (rsi <= this.rsiThresholds.buyZone) return 'progress-buy';
                if (rsi >= this.rsiThresholds.sellZone) return 'progress-sell';
                return 'progress-neutral';
            },
            
            // Get signal reason
            getSignalReason(signal, rsi) {
                if (!signal) return 'Monitoring RSI levels...';
                
                switch(signal.type) {
                    case 'STRONG_BUY': 
                        return `Extreme oversold (RSI: ${rsi}) - ${signal.count} timeframe${signal.count > 1 ? 's' : ''} agree`;
                    case 'STRONG_SELL': 
                        return `Extreme overbought (RSI: ${rsi}) - ${signal.count} timeframe${signal.count > 1 ? 's' : ''} agree`;
                    case 'BUY': 
                        return `Oversold reversal - ${signal.count} timeframe${signal.count > 1 ? 's' : ''} showing BUY`;
                    case 'SELL': 
                        return `Overbought reversal - ${signal.count} timeframe${signal.count > 1 ? 's' : ''} showing SELL`;
                    default: 
                        return 'Monitoring RSI levels...';
                }
            },
            
            // Get confidence class
            getConfidenceClass(signal) {
                if (!signal) return 'confidence-low';
                
                switch(signal.type) {
                    case 'STRONG_BUY':
                    case 'STRONG_SELL':
                        return 'confidence-high';
                    case 'BUY':
                    case 'SELL':
                        return signal.count >= 2 ? 'confidence-high' : 'confidence-medium';
                    default:
                        return 'confidence-low';
                }
            },
            
            // Get confidence percentage
            getConfidencePercent(signal) {
                if (!signal) return 30;
                
                switch(signal.type) {
                    case 'STRONG_BUY':
                    case 'STRONG_SELL':
                        return 90;
                    case 'BUY':
                    case 'SELL':
                        return Math.min(85, 60 + (signal.count * 10));
                    default:
                        return 30;
                }
            },
            
            // Load TradingView Chart
            async loadTradingViewChart() {
                const asset = this.assets.find(a => a.symbol === this.currentAsset);
                if (!asset) return;
                
                // Remove existing widget
                if (this.tvWidget) {
                    this.tvWidget.remove();
                }
                
                // Update chart title
                document.getElementById('chart-title').textContent = 
                    `${asset.name} (${asset.symbol}) - ${this.currentTimeframe}${this.currentTimeframe === 'D' ? '' : 'M'} Chart`;
                
                // Create new widget
                this.tvWidget = new TradingView.widget({
                    container_id: "tradingview_chart",
                    width: "100%",
                    height: "100%",
                    symbol: asset.tvSymbol,
                    interval: this.currentTimeframe,
                    timezone: "Etc/UTC",
                    theme: "dark",
                    style: "1",
                    locale: "en",
                    toolbar_bg: "#151a35",
                    enable_publishing: false,
                    hide_legend: false,
                    hide_volume: false,
                    save_image: false,
                    studies: [
                        "RSI@tv-basicstudies"
                    ],
                    overrides: {
                        "mainSeriesProperties.style": 1,
                        "paneProperties.background": "#151a35",
                        "paneProperties.vertGridProperties.color": "rgba(255,255,255,0.05)",
                        "paneProperties.horzGridProperties.color": "rgba(255,255,255,0.05)"
                    },
                    studies_overrides: {
                        "RSI.rsi.linewidth": 2,
                        "RSI.levels.0.value": this.rsiThresholds.extremeBuy,
                        "RSI.levels.1.value": this.rsiThresholds.buyZone,
                        "RSI.levels.2.value": this.rsiThresholds.sellZone,
                        "RSI.levels.3.value": this.rsiThresholds.extremeSell
                    }
                });
                
                // Set chart ready callback
                this.tvWidget.onChartReady(() => {
                    this.isChartLoaded = true;
                    console.log(`âœ… Chart loaded for ${asset.name}`);
                });
            },
            
            // Select asset to view in chart
            selectAsset(symbol) {
                this.currentAsset = symbol;
                
                // Update active card
                document.querySelectorAll('.asset-card').forEach(card => {
                    card.classList.remove('active');
                    if (card.dataset.symbol === symbol) {
                        card.classList.add('active');
                    }
                });
                
                // Reload chart
                this.loadTradingViewChart();
                
                console.log(`ðŸ“Š Now viewing ${symbol} chart`);
            },
            
            // Change timeframe
            changeTimeframe(timeframe, button) {
                // Update active button
                document.querySelectorAll('.tf-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                
                this.currentTimeframe = timeframe;
                
                // Update chart
                if (this.tvWidget && this.isChartLoaded) {
                    try {
                        this.tvWidget.chart().setResolution(timeframe);
                    } catch (error) {
                        console.error('Error changing timeframe:', error);
                        this.loadTradingViewChart();
                    }
                }
                
                // Update assets display with new timeframe
                this.loadAssetsDisplay();
                
                console.log(`ðŸ•’ Switched to ${timeframe}${timeframe === 'D' ? ' Daily' : 'M'} timeframe`);
            },
            
            // Start monitoring all assets
            startAssetMonitoring() {
                // Initial update
                this.updateAllAssets();
                
                // Update all assets every 3 seconds
                setInterval(() => {
                    this.updateAllAssets();
                }, 3000);
            },
            
            // Update all assets
            updateAllAssets() {
                this.assets.forEach(asset => {
                    // Update RSI for all timeframes
                    Object.keys(asset.rsiData).forEach(tf => {
                        this.updateAssetRSI(asset, tf);
                    });
                    
                    // Update price
                    this.updateAssetPrice(asset);
                    
                    // Update last update time
                    asset.lastUpdate = new Date();
                });
                
                // Update display
                this.loadAssetsDisplay();
            },
            
            // Update asset RSI for specific timeframe
            updateAssetRSI(asset, timeframe) {
                // Generate realistic RSI movement based on asset type and timeframe
                let currentRSI = asset.rsiData[timeframe] || 50;
                
                // Timeframe volatility multiplier
                const tfVolatility = {
                    '1': 2.0,   // 1M: High volatility
                    '5': 1.5,   // 5M: High volatility
                    '15': 1.0,  // 15M: Medium volatility
                    '60': 0.8,  // 1H: Lower volatility
                    '240': 0.5, // 4H: Low volatility
                    'D': 0.3    // Daily: Very low volatility
                };
                
                // Asset type volatility
                const assetVolatility = {
                    'crypto': 1.5,
                    'forex': 1.0,
                    'commodity': 0.8,
                    'index': 1.2
                };
                
                // Market session influence
                const hour = new Date().getUTCHours();
                let sessionVolatility = 1.0;
                
                if (hour >= 13 && hour < 21) sessionVolatility = 1.5; // NY Session
                else if (hour >= 8 && hour < 16) sessionVolatility = 1.3; // London Session
                else if (hour >= 22 || hour < 6) sessionVolatility = 1.1; // Asia Session
                
                // Calculate movement
                const volatility = tfVolatility[timeframe] * assetVolatility[asset.type] * sessionVolatility;
                const movement = (Math.random() - 0.5) * volatility * 2;
                
                currentRSI += movement;
                
                // Mean reversion at extremes
                if (currentRSI > 80) currentRSI -= Math.random() * 3;
                if (currentRSI < 20) currentRSI += Math.random() * 3;
                
                // Keep in bounds
                currentRSI = Math.max(0, Math.min(100, currentRSI));
                currentRSI = parseFloat(currentRSI.toFixed(2));
                
                // Update RSI data
                asset.rsiData[timeframe] = currentRSI;
                
                // Generate signal for this timeframe
                asset.signals[timeframe] = this.generateTimeframeSignal(currentRSI, asset.previousRSI?.[timeframe]);
                
                // Store previous RSI
                if (!asset.previousRSI) asset.previousRSI = {};
                asset.previousRSI[timeframe] = currentRSI;
            },
            
            // Generate signal for specific timeframe
            generateTimeframeSignal(currentRSI, previousRSI) {
                if (!previousRSI) return null;
                
                const rsiChange = currentRSI - previousRSI;
                
                // Extreme reversal signals
                if (currentRSI <= this.rsiThresholds.extremeBuy && previousRSI > this.rsiThresholds.extremeBuy) {
                    return { type: 'STRONG_BUY', strength: 'extreme', change: rsiChange };
                }
                
                if (currentRSI >= this.rsiThresholds.extremeSell && previousRSI < this.rsiThresholds.extremeSell) {
                    return { type: 'STRONG_SELL', strength: 'extreme', change: rsiChange };
                }
                
                // Zone reversal signals
                if (currentRSI <= this.rsiThresholds.buyZone && previousRSI > this.rsiThresholds.buyZone) {
                    return { type: 'BUY', strength: 'moderate', change: rsiChange };
                }
                
                if (currentRSI >= this.rsiThresholds.sellZone && previousRSI < this.rsiThresholds.sellZone) {
                    return { type: 'SELL', strength: 'moderate', change: rsiChange };
                }
                
                // Trend beginning signals (RSI crossing 50 with momentum)
                if (currentRSI > 50 && previousRSI <= 50 && rsiChange > 1) {
                    return { type: 'BUY', strength: 'trend', change: rsiChange };
                }
                
                if (currentRSI < 50 && previousRSI >= 50 && rsiChange < -1) {
                    return { type: 'SELL', strength: 'trend', change: rsiChange };
                }
                
                return null;
            },
            
            // Update asset price
            updateAssetPrice(asset) {
                // Generate realistic price movement
                const volatility = asset.type === 'crypto' ? 0.02 : 0.01;
                const priceChange = (Math.random() - 0.5) * volatility;
                
                asset.price *= (1 + priceChange);
                
                // Format based on asset type
                if (asset.type === 'forex') {
                    asset.price = parseFloat(asset.price.toFixed(4));
                } else {
                    asset.price = parseFloat(asset.price.toFixed(2));
                }
            }
        };
        
        // Initialize system when page loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ðŸš€ KILLER ZONE System Starting...');
            KillerZoneSystem.init();
            
            // Auto-select first asset
            setTimeout(() => {
                const firstAsset = document.querySelector('.asset-card');
                if (firstAsset) {
                    firstAsset.classList.add('active');
                }
            }, 100);
        });
    </script>
</body>
</html>
