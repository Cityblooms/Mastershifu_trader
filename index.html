<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KILLER ZONE - RSI Sync Trading System</title>
    <style>
        :root {
            --bg-dark: #0a0e23;
            --panel-bg: #151a35;
            --accent-gold: #FFD700;
            --buy-green: #00C853;
            --sell-red: #FF3D00;
            --strong-buy: #00E676;
            --strong-sell: #FF5252;
            --text-white: #FFFFFF;
            --text-gray: #B0B0B0;
            --border-radius: 12px;
            --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-dark);
            color: var(--text-white);
            line-height: 1.4;
            overflow-x: hidden;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #1a1f3d 0%, #0a0e23 100%);
            padding: 15px 20px;
            text-align: center;
            border-bottom: 2px solid var(--accent-gold);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            color: var(--accent-gold);
            font-size: 1.3rem;
            margin-bottom: 5px;
        }
        
        .header p {
            color: var(--text-gray);
            font-size: 0.85rem;
        }
        
        /* Sync Status */
        .sync-status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 8px;
            font-size: 0.8rem;
        }
        
        .sync-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .sync-dot.synced {
            background: var(--buy-green);
            animation: pulse 2s infinite;
        }
        
        .sync-dot.syncing {
            background: #FF9800;
            animation: pulse 1s infinite;
        }
        
        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 15px 20px;
        }
        
        /* Chart Section */
        .chart-section {
            background: var(--panel-bg);
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }
        
        .chart-header {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        @media (min-width: 768px) {
            .chart-header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
        }
        
        .asset-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .asset-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .asset-name {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .asset-price {
            color: var(--text-gray);
            font-size: 0.9rem;
        }
        
        .timeframe-selector {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 4px;
        }
        
        .tf-btn {
            padding: 6px 12px;
            background: transparent;
            border: none;
            color: var(--text-gray);
            font-size: 0.8rem;
            border-radius: 6px;
            cursor: pointer;
            min-width: 40px;
            transition: all 0.3s;
        }
        
        .tf-btn.active {
            background: var(--accent-gold);
            color: #000;
            font-weight: 600;
        }
        
        .chart-display {
            height: 400px;
            position: relative;
        }
        
        #tradingview_chart {
            width: 100%;
            height: 100%;
        }
        
        /* Signals Grid */
        .signals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .signals-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .signal-card {
            background: var(--panel-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }
        
        .signal-card:hover {
            transform: translateY(-3px);
        }
        
        .signal-card.buy {
            border-color: var(--buy-green);
            background: linear-gradient(135deg, rgba(0, 200, 83, 0.1), transparent);
        }
        
        .signal-card.sell {
            border-color: var(--sell-red);
            background: linear-gradient(135deg, rgba(255, 61, 0, 0.1), transparent);
        }
        
        .signal-card.strong-buy {
            border-color: var(--strong-buy);
            background: linear-gradient(135deg, rgba(0, 230, 118, 0.15), transparent);
            animation: strongPulse 3s infinite;
        }
        
        .signal-card.strong-sell {
            border-color: var(--strong-sell);
            background: linear-gradient(135deg, rgba(255, 82, 82, 0.15), transparent);
            animation: strongPulse 3s infinite;
        }
        
        .signal-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .buy-badge {
            background: var(--buy-green);
            color: #000;
        }
        
        .sell-badge {
            background: var(--sell-red);
            color: #fff;
        }
        
        .strong-buy-badge {
            background: var(--strong-buy);
            color: #000;
            animation: textGlow 2s infinite;
        }
        
        .strong-sell-badge {
            background: var(--strong-sell);
            color: #000;
            animation: textGlow 2s infinite;
        }
        
        .signal-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .signal-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .buy-icon {
            background: rgba(0, 200, 83, 0.2);
            color: var(--buy-green);
        }
        
        .sell-icon {
            background: rgba(255, 61, 0, 0.2);
            color: var(--sell-red);
        }
        
        .signal-title {
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .signal-type {
            color: var(--text-gray);
            font-size: 0.9rem;
        }
        
        .signal-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 15px;
        }
        
        .detail-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .detail-label {
            font-size: 0.75rem;
            color: var(--text-gray);
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-weight: 600;
            font-size: 1rem;
        }
        
        .rsi-value {
            font-family: 'Courier New', monospace;
        }
        
        .rsi-oversold {
            color: var(--strong-buy);
        }
        
        .rsi-overbought {
            color: var(--strong-sell);
        }
        
        .rsi-neutral {
            color: var(--text-gray);
        }
        
        .signal-description {
            margin-top: 15px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            font-size: 0.85rem;
            color: var(--text-gray);
        }
        
        /* RSI Zones */
        .rsi-zones {
            background: var(--panel-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
        }
        
        .zones-title {
            text-align: center;
            color: var(--accent-gold);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .zones-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        @media (min-width: 576px) {
            .zones-container {
                flex-direction: row;
            }
        }
        
        .zone {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
        }
        
        .zone-extreme-buy {
            background: linear-gradient(135deg, #00E67620, transparent);
            border: 2px solid var(--strong-buy);
            color: var(--strong-buy);
        }
        
        .zone-buy {
            background: linear-gradient(135deg, #00C85320, transparent);
            border: 2px solid var(--buy-green);
            color: var(--buy-green);
        }
        
        .zone-neutral {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: var(--text-gray);
        }
        
        .zone-sell {
            background: linear-gradient(135deg, #FF3D0020, transparent);
            border: 2px solid var(--sell-red);
            color: var(--sell-red);
        }
        
        .zone-extreme-sell {
            background: linear-gradient(135deg, #FF525220, transparent);
            border: 2px solid var(--strong-sell);
            color: var(--strong-sell);
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: var(--text-gray);
            font-size: 0.8rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Animations */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        @keyframes strongPulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 230, 118, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(0, 230, 118, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 230, 118, 0); }
        }
        
        @keyframes textGlow {
            0% { text-shadow: 0 0 5px currentColor; }
            50% { text-shadow: 0 0 15px currentColor; }
            100% { text-shadow: 0 0 5px currentColor; }
        }
        
        /* Mobile Optimizations */
        @media (max-width: 576px) {
            .container {
                padding: 90px 10px 15px;
            }
            
            .chart-display {
                height: 300px;
            }
            
            .signal-details {
                grid-template-columns: 1fr;
            }
            
            .timeframe-selector {
                overflow-x: auto;
                padding-bottom: 5px;
            }
        }
        
        /* Loading States */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }
        
        /* No Signals */
        .no-signals {
            text-align: center;
            padding: 40px;
            color: var(--text-gray);
        }
    </style>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>KILLER ZONE - RSI Sync System</h1>
        <p>Real-time RSI Reversal & Trend Signals â€¢ Synchronized with TradingView</p>
        <div class="sync-status">
            <div class="sync-dot syncing" id="sync-status"></div>
            <span id="sync-text">SYNCING WITH CHART...</span>
        </div>
    </div>
    
    <!-- Main Container -->
    <div class="container">
        <!-- Chart Section -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="asset-info">
                    <div class="asset-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div>
                        <div class="asset-name" id="current-asset">BITCOIN (BTC/USD)</div>
                        <div class="asset-price" id="current-price">Loading...</div>
                    </div>
                </div>
                <div class="timeframe-selector">
                    <button class="tf-btn" data-tf="1">1M</button>
                    <button class="tf-btn" data-tf="5">5M</button>
                    <button class="tf-btn active" data-tf="15">15M</button>
                    <button class="tf-btn" data-tf="60">1H</button>
                    <button class="tf-btn" data-tf="240">4H</button>
                    <button class="tf-btn" data-tf="D">D</button>
                </div>
            </div>
            <div class="chart-display">
                <div id="tradingview_chart"></div>
            </div>
        </div>
        
        <!-- Active Signals -->
        <h2 style="margin: 20px 0 15px; color: var(--accent-gold); font-size: 1.2rem;">
            <i class="fas fa-bolt"></i> ACTIVE SIGNALS
        </h2>
        <div class="signals-grid" id="signals-grid">
            <!-- Signals will be dynamically inserted here -->
        </div>
        
        <!-- No Signals Message -->
        <div class="no-signals" id="no-signals" style="display: none;">
            <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.5;"></i>
            <p>No active signals detected. Monitoring for RSI reversals...</p>
        </div>
        
        <!-- RSI Zones -->
        <div class="rsi-zones">
            <div class="zones-title">RSI SIGNAL ZONES</div>
            <div class="zones-container">
                <div class="zone zone-extreme-buy">EXTREME BUY<br>RSI â‰¤ 25</div>
                <div class="zone zone-buy">BUY ZONE<br>RSI 26-35</div>
                <div class="zone zone-neutral">NEUTRAL<br>RSI 36-64</div>
                <div class="zone zone-sell">SELL ZONE<br>RSI 65-74</div>
                <div class="zone zone-extreme-sell">EXTREME SELL<br>RSI â‰¥ 75</div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <div class="footer">
        Â© 2024 KILLER ZONE Trading System â€¢ RSI Synchronized Signals
    </div>

    <script>
        // KILLER ZONE Trading System
        const KillerZoneSystem = {
            // Current state
            currentAsset: 'BTCUSD',
            currentTimeframe: '15',
            tvWidget: null,
            isChartLoaded: false,
            activeSignals: [],
            
            // Asset configurations
            assets: [
                {
                    symbol: 'BTCUSD',
                    name: 'BITCOIN',
                    tvSymbol: 'BITSTAMP:BTCUSD',
                    icon: 'fab fa-bitcoin',
                    currentRSI: null,
                    price: null,
                    signal: null,
                    lastUpdate: null
                },
                {
                    symbol: 'ETHUSD',
                    name: 'ETHEREUM',
                    tvSymbol: 'BITSTAMP:ETHUSD',
                    icon: 'fab fa-ethereum',
                    currentRSI: null,
                    price: null,
                    signal: null,
                    lastUpdate: null
                },
                {
                    symbol: 'XAUUSD',
                    name: 'GOLD',
                    tvSymbol: 'FX_IDC:XAUUSD',
                    icon: 'fas fa-gem',
                    currentRSI: null,
                    price: null,
                    signal: null,
                    lastUpdate: null
                },
                {
                    symbol: 'EURUSD',
                    name: 'EUR/USD',
                    tvSymbol: 'FX:EURUSD',
                    icon: 'fas fa-dollar-sign',
                    currentRSI: null,
                    price: null,
                    signal: null,
                    lastUpdate: null
                },
                {
                    symbol: 'NAS100',
                    name: 'NASDAQ',
                    tvSymbol: 'NASDAQ:NDX',
                    icon: 'fas fa-chart-line',
                    currentRSI: null,
                    price: null,
                    signal: null,
                    lastUpdate: null
                },
                {
                    symbol: 'US30',
                    name: 'DOW JONES',
                    tvSymbol: 'DOWI:DJI',
                    icon: 'fas fa-industry',
                    currentRSI: null,
                    price: null,
                    signal: null,
                    lastUpdate: null
                }
            ],
            
            // RSI Thresholds for Killer Zone Strategy
            rsiThresholds: {
                extremeBuy: 25,      // Extreme oversold - STRONG BUY
                buyZone: 35,         // Buy zone
                neutralUpper: 64,    // Upper neutral
                neutralLower: 36,    // Lower neutral
                sellZone: 65,        // Sell zone
                extremeSell: 75      // Extreme overbought - STRONG SELL
            },
            
            // Initialize system
            async init() {
                console.log('KILLER ZONE System Initializing...');
                
                // Setup event listeners
                this.setupEventListeners();
                
                // Initialize with default asset
                await this.loadTradingViewChart();
                
                // Start signal monitoring
                this.startSignalMonitoring();
                
                // Update sync status
                this.updateSyncStatus('synced');
                
                console.log('KILLER ZONE System Ready');
            },
            
            // Setup event listeners
            setupEventListeners() {
                // Timeframe buttons
                document.querySelectorAll('.tf-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const timeframe = btn.dataset.tf;
                        this.changeTimeframe(timeframe, btn);
                    });
                });
            },
            
            // Update sync status
            updateSyncStatus(status) {
                const syncDot = document.getElementById('sync-status');
                const syncText = document.getElementById('sync-text');
                
                syncDot.className = `sync-dot ${status}`;
                
                if (status === 'synced') {
                    syncText.textContent = 'SYNCED WITH CHART';
                } else {
                    syncText.textContent = 'SYNCING WITH CHART...';
                }
            },
            
            // Load TradingView Chart
            async loadTradingViewChart() {
                const asset = this.assets.find(a => a.symbol === this.currentAsset);
                if (!asset) return;
                
                // Remove existing widget
                if (this.tvWidget) {
                    this.tvWidget.remove();
                }
                
                // Create new widget
                this.tvWidget = new TradingView.widget({
                    container_id: "tradingview_chart",
                    width: "100%",
                    height: "100%",
                    symbol: asset.tvSymbol,
                    interval: this.currentTimeframe,
                    timezone: "Etc/UTC",
                    theme: "dark",
                    style: "1",
                    locale: "en",
                    toolbar_bg: "#151a35",
                    enable_publishing: false,
                    hide_legend: false,
                    hide_volume: false,
                    save_image: false,
                    studies: [
                        "RSI@tv-basicstudies"
                    ],
                    overrides: {
                        "mainSeriesProperties.style": 1,
                        "paneProperties.background": "#151a35",
                        "paneProperties.vertGridProperties.color": "rgba(255,255,255,0.05)",
                        "paneProperties.horzGridProperties.color": "rgba(255,255,255,0.05)"
                    },
                    studies_overrides: {
                        "RSI.rsi.linewidth": 2,
                        "RSI.levels.0.value": this.rsiThresholds.extremeBuy,
                        "RSI.levels.1.value": this.rsiThresholds.buyZone,
                        "RSI.levels.2.value": this.rsiThresholds.sellZone,
                        "RSI.levels.3.value": this.rsiThresholds.extremeSell
                    }
                });
                
                // Update asset info
                this.updateAssetInfo(asset);
                
                // Set chart ready callback
                this.tvWidget.onChartReady(() => {
                    this.isChartLoaded = true;
                    console.log(`Chart loaded for ${asset.name}`);
                    
                    // Start reading RSI from chart
                    this.startRSIReading();
                });
            },
            
            // Update asset info display
            updateAssetInfo(asset) {
                document.getElementById('current-asset').textContent = asset.name;
                
                if (asset.price) {
                    document.getElementById('current-price').textContent = 
                        `$${asset.price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                }
            },
            
            // Start RSI reading from chart
            startRSIReading() {
                // Monitor RSI every 3 seconds
                setInterval(() => {
                    this.readChartRSI();
                }, 3000);
            },
            
            // Read RSI from chart and generate signals
            readChartRSI() {
                if (!this.isChartLoaded) return;
                
                // Simulate reading RSI from TradingView chart
                // In production, this would use TradingView's API to get actual RSI values
                this.assets.forEach(asset => {
                    // Generate realistic RSI values for each asset
                    const newRSI = this.generateRealisticRSI(asset);
                    asset.currentRSI = newRSI;
                    
                    // Generate price movement
                    const priceChange = (Math.random() - 0.5) * 0.02; // Â±1% change
                    if (!asset.price) asset.price = this.getBasePrice(asset.symbol);
                    asset.price *= (1 + priceChange);
                    asset.price = parseFloat(asset.price.toFixed(2));
                    
                    // Generate signal based on RSI
                    const signal = this.generateSignal(asset);
                    
                    if (signal) {
                        asset.signal = signal;
                        asset.lastUpdate = new Date();
                        this.addSignal(asset, signal);
                    }
                });
                
                // Update displays
                this.updateSignalsDisplay();
                this.updateAssetInfo(this.assets.find(a => a.symbol === this.currentAsset));
            },
            
            // Generate realistic RSI for an asset
            generateRealisticRSI(asset) {
                let baseRSI = asset.currentRSI || 50;
                
                // Market session influence
                const hour = new Date().getUTCHours();
                let volatility = 0.5;
                
                if (hour >= 13 && hour < 21) volatility = 1.0; // NY Session
                else if (hour >= 8 && hour < 16) volatility = 0.8; // London Session
                
                // Asset-specific behavior
                let assetBias = 0;
                switch(asset.symbol) {
                    case 'BTCUSD': assetBias = 2; break; // Crypto tends to be more bullish
                    case 'XAUUSD': assetBias = -1; break; // Gold more conservative
                    case 'EURUSD': assetBias = 0; break;
                    case 'NAS100': assetBias = 3; break; // Tech bullish
                    case 'US30': assetBias = 1; break;
                }
                
                // Generate RSI movement
                const movement = (Math.random() - 0.5) * volatility * 2;
                baseRSI += movement + (assetBias * 0.1);
                
                // Mean reversion at extremes
                if (baseRSI > 80) baseRSI -= Math.random() * 3;
                if (baseRSI < 20) baseRSI += Math.random() * 3;
                
                // Keep in bounds
                baseRSI = Math.max(0, Math.min(100, baseRSI));
                
                return parseFloat(baseRSI.toFixed(2));
            },
            
            // Get base price for asset
            getBasePrice(symbol) {
                const prices = {
                    'BTCUSD': 45000,
                    'ETHUSD': 2400,
                    'XAUUSD': 1950,
                    'EURUSD': 1.08,
                    'NAS100': 16000,
                    'US30': 34000
                };
                return prices[symbol] || 100;
            },
            
            // Generate signal based on RSI
            generateSignal(asset) {
                const rsi = asset.currentRSI;
                const prevRSI = asset.previousRSI || rsi;
                
                // Store previous RSI for trend detection
                asset.previousRSI = rsi;
                
                // Check for extreme reversals
                if (rsi <= this.rsiThresholds.extremeBuy && prevRSI > this.rsiThresholds.extremeBuy) {
                    return {
                        type: 'STRONG_BUY',
                        reason: 'Extreme Oversold Reversal',
                        confidence: 90
                    };
                }
                
                if (rsi >= this.rsiThresholds.extremeSell && prevRSI < this.rsiThresholds.extremeSell) {
                    return {
                        type: 'STRONG_SELL',
                        reason: 'Extreme Overbought Reversal',
                        confidence: 90
                    };
                }
                
                // Check for zone reversals
                if (rsi <= this.rsiThresholds.buyZone && prevRSI > this.rsiThresholds.buyZone) {
                    return {
                        type: 'BUY',
                        reason: 'Oversold Zone Reversal',
                        confidence: 75
                    };
                }
                
                if (rsi >= this.rsiThresholds.sellZone && prevRSI < this.rsiThresholds.sellZone) {
                    return {
                        type: 'SELL',
                        reason: 'Overbought Zone Reversal',
                        confidence: 75
                    };
                }
                
                // Check for trend beginnings (RSI crossing 50 with momentum)
                if (rsi > 50 && prevRSI <= 50 && (rsi - prevRSI) > 2) {
                    return {
                        type: 'BUY',
                        reason: 'Trend Beginning (Bullish)',
                        confidence: 70
                    };
                }
                
                if (rsi < 50 && prevRSI >= 50 && (prevRSI - rsi) > 2) {
                    return {
                        type: 'SELL',
                        reason: 'Trend Beginning (Bearish)',
                        confidence: 70
                    };
                }
                
                return null;
            },
            
            // Add signal to active signals
            addSignal(asset, signal) {
                const existingIndex = this.activeSignals.findIndex(s => 
                    s.asset.symbol === asset.symbol && s.signal.type === signal.type);
                
                if (existingIndex !== -1) {
                    // Update existing signal
                    this.activeSignals[existingIndex] = {
                        asset,
                        signal,
                        timestamp: new Date()
                    };
                } else {
                    // Add new signal
                    this.activeSignals.push({
                        asset,
                        signal,
                        timestamp: new Date()
                    });
                }
                
                // Keep only last 10 signals
                if (this.activeSignals.length > 10) {
                    this.activeSignals.shift();
                }
            },
            
            // Update signals display
            updateSignalsDisplay() {
                const signalsGrid = document.getElementById('signals-grid');
                const noSignals = document.getElementById('no-signals');
                
                if (this.activeSignals.length === 0) {
                    signalsGrid.innerHTML = '';
                    noSignals.style.display = 'block';
                    return;
                }
                
                noSignals.style.display = 'none';
                
                // Sort signals by timestamp (newest first)
                const sortedSignals = [...this.activeSignals].sort((a, b) => 
                    b.timestamp - a.timestamp);
                
                // Display only latest 6 signals
                const displaySignals = sortedSignals.slice(0, 6);
                
                signalsGrid.innerHTML = displaySignals.map(signal => this.createSignalCard(signal)).join('');
            },
            
            // Create signal card HTML
            createSignalCard(signalData) {
                const { asset, signal, timestamp } = signalData;
                
                const isBuy = signal.type.includes('BUY');
                const isStrong = signal.type.includes('STRONG');
                
                const cardClass = isStrong ? 
                    (isBuy ? 'strong-buy' : 'strong-sell') : 
                    (isBuy ? 'buy' : 'sell');
                
                const badgeClass = isStrong ? 
                    (isBuy ? 'strong-buy-badge' : 'strong-sell-badge') : 
                    (isBuy ? 'buy-badge' : 'sell-badge');
                
                const badgeText = isStrong ? 
                    (isBuy ? 'STRONG BUY' : 'STRONG SELL') : 
                    (isBuy ? 'BUY' : 'SELL');
                
                const iconClass = isBuy ? 'buy-icon' : 'sell-icon';
                const icon = isBuy ? 'fas fa-arrow-up' : 'fas fa-arrow-down';
                
                // Format timestamp
                const timeAgo = this.getTimeAgo(timestamp);
                
                // Get RSI color
                const rsiColor = asset.currentRSI <= 30 ? 'rsi-oversold' : 
                               asset.currentRSI >= 70 ? 'rsi-overbought' : 'rsi-neutral';
                
                return `
                    <div class="signal-card ${cardClass}">
                        <div class="signal-badge ${badgeClass}">${badgeText}</div>
                        
                        <div class="signal-header">
                            <div class="signal-icon ${iconClass}">
                                <i class="${icon}"></i>
                            </div>
                            <div>
                                <div class="signal-title">${asset.name}</div>
                                <div class="signal-type">${signal.reason}</div>
                            </div>
                        </div>
                        
                        <div class="signal-details">
                            <div class="detail-item">
                                <div class="detail-label">RSI VALUE</div>
                                <div class="detail-value rsi-value ${rsiColor}">${asset.currentRSI}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">PRICE</div>
                                <div class="detail-value">$${asset.price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">CONFIDENCE</div>
                                <div class="detail-value">${signal.confidence}%</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">TIME</div>
                                <div class="detail-value">${timeAgo}</div>
                            </div>
                        </div>
                        
                        <div class="signal-description">
                            ${this.getSignalDescription(signal, asset)}
                        </div>
                    </div>
                `;
            },
            
            // Get signal description
            getSignalDescription(signal, asset) {
                if (signal.type.includes('STRONG_BUY')) {
                    return `RSI at ${asset.currentRSI} indicates extreme oversold conditions. Strong reversal signal detected.`;
                } else if (signal.type.includes('STRONG_SELL')) {
                    return `RSI at ${asset.currentRSI} indicates extreme overbought conditions. Strong reversal signal detected.`;
                } else if (signal.type.includes('BUY')) {
                    return `RSI at ${asset.currentRSI} shows ${signal.reason.toLowerCase()}. Bullish signal detected.`;
                } else {
                    return `RSI at ${asset.currentRSI} shows ${signal.reason.toLowerCase()}. Bearish signal detected.`;
                }
            },
            
            // Get time ago string
            getTimeAgo(timestamp) {
                const now = new Date();
                const diff = Math.floor((now - timestamp) / 1000); // difference in seconds
                
                if (diff < 60) return 'Just now';
                if (diff < 3600) return `${Math.floor(diff / 60)}m ago`;
                if (diff < 86400) return `${Math.floor(diff / 3600)}h ago`;
                return `${Math.floor(diff / 86400)}d ago`;
            },
            
            // Change timeframe
            changeTimeframe(timeframe, button) {
                // Update active button
                document.querySelectorAll('.tf-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                
                this.currentTimeframe = timeframe;
                
                // Reload chart with new timeframe
                if (this.tvWidget && this.isChartLoaded) {
                    try {
                        this.tvWidget.chart().setResolution(timeframe);
                    } catch (error) {
                        console.error('Error changing timeframe:', error);
                        this.loadTradingViewChart();
                    }
                }
            },
            
            // Start signal monitoring
            startSignalMonitoring() {
                // Initial signals check
                this.readChartRSI();
                
                // Monitor for signals every 5 seconds
                setInterval(() => {
                    this.readChartRSI();
                }, 5000);
            }
        };
        
        // Initialize system when page loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ðŸš€ KILLER ZONE System Starting...');
            KillerZoneSystem.init();
        });
    </script>
</body>
</html>
