<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KILER ZONE - Professional Trading Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --buy-color: #10b981;
            --sell-color: #ef4444;
            --neutral-color: #6b7280;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --warning: #f59e0b;
            --error: #dc2626;
            --success: #22c55e;
            --primary-blue: #3b82f6;
            --purple: #8b5cf6;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 15px;
            min-height: 100vh;
        }
        
        .container { max-width: 1400px; margin: 0 auto; }
        
        /* Header */
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--bg-card);
        }
        
        .title {
            font-size: 2.2rem;
            background: linear-gradient(90deg, #ffd700, #ffed4e, #8b5cf6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 5px;
            font-weight: 800;
            letter-spacing: -0.5px;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        /* Connection Banner */
        .connection-banner {
            background: var(--bg-card);
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #334155;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .status-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--error);
        }
        
        .status-dot.connected { background: var(--success); animation: pulse 2s infinite; }
        .status-dot.connecting { background: var(--warning); }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .status-text {
            font-size: 0.95rem;
            font-weight: 600;
        }
        
        .connection-time {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-family: 'Courier New', monospace;
            background: rgba(15, 23, 42, 0.5);
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        /* API Setup */
        .api-setup {
            background: linear-gradient(135deg, #1e293b, #2d3748);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid var(--warning);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .api-setup h3 {
            margin-bottom: 15px;
            color: var(--warning);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .api-input-group {
            display: flex;
            gap: 12px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .api-input-group input {
            flex: 1;
            min-width: 300px;
            padding: 12px 15px;
            background: var(--bg-dark);
            border: 2px solid #475569;
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        
        .api-input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .connect-btn {
            padding: 12px 30px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .connect-btn:hover { 
            background: #16a34a; 
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(22, 163, 74, 0.3);
        }
        
        .connect-btn:disabled { 
            background: var(--neutral-color); 
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .disconnect-btn {
            padding: 12px 25px;
            background: var(--error);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .disconnect-btn:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }
        
        .api-info {
            margin-top: 15px;
            padding: 12px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
            font-size: 0.85rem;
            border-left: 4px solid #3b82f6;
            line-height: 1.5;
        }
        
        .api-info a {
            color: #60a5fa;
            text-decoration: none;
            font-weight: 600;
        }
        
        .api-info a:hover {
            text-decoration: underline;
        }
        
        /* Main Controls */
        .main-controls {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 1px solid #334155;
            display: none;
        }
        
        .controls-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            align-items: center;
        }
        
        .rsi-controls {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .control-group label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
            white-space: nowrap;
        }
        
        .control-group input, .control-group select {
            padding: 8px 12px;
            background: var(--bg-dark);
            border: 1px solid #475569;
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 0.9rem;
            min-width: 80px;
        }
        
        .control-group input {
            text-align: center;
        }
        
        .control-group input:focus, .control-group select:focus {
            outline: none;
            border-color: var(--primary-blue);
        }
        
        .assets-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .assets-selector select {
            flex: 1;
            min-width: 200px;
            padding: 10px 12px;
            background: var(--bg-dark);
            border: 1px solid #475569;
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 0.9rem;
        }
        
        /* Dashboard Content */
        .dashboard-content {
            display: none;
        }
        
        /* Asset Display */
        .asset-display {
            display: none;
            background: var(--bg-card);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #334155;
        }
        
        .asset-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #334155;
        }
        
        .selected-asset-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .asset-icon-large {
            font-size: 2rem;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }
        
        .asset-details h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .asset-symbol {
            font-size: 1rem;
            color: var(--text-secondary);
            font-family: 'Courier New', monospace;
        }
        
        .price-display-large {
            text-align: right;
        }
        
        .current-price-large {
            font-size: 2.2rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            margin-bottom: 5px;
        }
        
        .price-change-large {
            font-size: 1rem;
            font-family: 'Courier New', monospace;
            font-weight: 600;
        }
        
        .price-change-large.positive { color: var(--buy-color); }
        .price-change-large.negative { color: var(--sell-color); }
        
        /* Signal Display */
        .signal-display {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #334155;
            transition: all 0.3s;
        }
        
        .signal-display.buy-signal {
            border-color: var(--buy-color);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05));
        }
        
        .signal-display.sell-signal {
            border-color: var(--sell-color);
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.05));
        }
        
        .signal-display.neutral {
            border-color: #334155;
        }
        
        .signal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .signal-title {
            font-size: 1.3rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .signal-badge {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .signal-badge.buy { background: var(--buy-color); }
        .signal-badge.sell { background: var(--sell-color); }
        .signal-badge.neutral { background: var(--neutral-color); }
        
        .signal-strength {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        /* RSI Meter Large */
        .rsi-meter-large {
            margin: 20px 0;
        }
        
        .rsi-value-large {
            font-size: 2rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .rsi-bar-container-large {
            height: 25px;
            background: #334155;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            margin-bottom: 8px;
        }
        
        .rsi-bar-large {
            height: 100%;
            transition: all 0.5s ease;
        }
        
        .rsi-bar-large.oversold { background: linear-gradient(90deg, var(--buy-color), #22c55e); }
        .rsi-bar-large.neutral { background: linear-gradient(90deg, #22c55e, #f59e0b); }
        .rsi-bar-large.overbought { background: linear-gradient(90deg, #f59e0b, var(--sell-color)); }
        
        .rsi-levels-large {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--text-secondary);
            padding: 0 5px;
        }
        
        /* Mini Chart */
        .mini-chart-container {
            height: 150px;
            margin: 20px 0;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        
        .mini-chart-container canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Market Session Info */
        .market-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .info-card {
            background: rgba(30, 41, 59, 0.5);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--primary-blue);
        }
        
        .info-card h4 {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        
        .info-card .value {
            font-size: 1.1rem;
            font-weight: 600;
            font-family: 'Courier New', monospace;
        }
        
        /* Signal Log */
        .signal-log {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #334155;
        }
        
        .signal-log h3 {
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .log-entries {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .log-entry {
            display: grid;
            grid-template-columns: 80px 1fr 1fr 1fr;
            gap: 15px;
            padding: 12px 0;
            border-bottom: 1px solid #334155;
            align-items: center;
            font-size: 0.85rem;
        }
        
        .log-time {
            font-family: 'Courier New', monospace;
            color: var(--text-secondary);
        }
        
        .log-asset {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .log-signal {
            font-weight: bold;
            padding: 4px 10px;
            border-radius: 4px;
            text-align: center;
            width: fit-content;
        }
        
        .log-signal.buy { background: rgba(16, 185, 129, 0.2); color: var(--buy-color); }
        .log-signal.sell { background: rgba(239, 68, 68, 0.2); color: var(--sell-color); }
        
        .log-price {
            font-family: 'Courier New', monospace;
            text-align: right;
            font-weight: 600;
        }
        
        /* Performance Stats */
        .performance-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: var(--bg-card);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #334155;
        }
        
        .stat-card h4 {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        
        .stat-value {
            font-size: 1.3rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }
        
        .stat-value.positive { color: var(--buy-color); }
        .stat-value.negative { color: var(--sell-color); }
        
        /* Disclaimer */
        .disclaimer {
            background: linear-gradient(135deg, #7c2d12, #9a3412);
            color: #fbbf24;
            padding: 20px;
            border-radius: 10px;
            font-size: 0.85rem;
            border: 2px solid #ea580c;
            line-height: 1.6;
            margin-top: 20px;
        }
        
        .disclaimer strong {
            display: block;
            margin-bottom: 10px;
            font-size: 1rem;
        }
        
        /* Loading States */
        .loading-state, .error-state {
            text-align: center;
            padding: 50px 20px;
            color: var(--text-secondary);
        }
        
        .error-state {
            color: var(--error);
            background: rgba(220, 38, 38, 0.1);
            border-radius: 10px;
            border: 2px solid var(--error);
        }
        
        .spinner {
            border: 4px solid #334155;
            border-top: 4px solid var(--success);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .title { font-size: 1.8rem; }
            .subtitle { font-size: 0.8rem; }
            .controls-grid { grid-template-columns: 1fr; gap: 20px; }
            .api-input-group { flex-direction: column; }
            .api-input-group input { min-width: 100%; }
            .connection-banner { flex-direction: column; align-items: flex-start; gap: 10px; }
            .asset-header { flex-direction: column; text-align: center; gap: 15px; }
            .price-display-large { text-align: center; }
            .log-entry { grid-template-columns: 1fr; gap: 8px; }
            .market-info { grid-template-columns: 1fr; }
            .performance-stats { grid-template-columns: repeat(2, 1fr); }
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1e293b;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="title">‚ö° KILER ZONE</h1>
            <p class="subtitle">Professional RSI Trading Dashboard ‚Ä¢ Real-Time Signals ‚Ä¢ 5-Minute Timeframe</p>
        </div>

        <!-- Connection Status -->
        <div class="connection-banner">
            <div class="status-section">
                <div class="status-dot" id="statusDot"></div>
                <span class="status-text" id="statusText">Disconnected</span>
            </div>
            <div class="connection-time" id="connectionTime">--:--:-- UTC</div>
        </div>

        <!-- API Setup -->
        <div class="api-setup" id="apiSetup">
            <h3>üîå Connect to Trading API</h3>
            <div class="api-input-group">
                <input type="password" id="apiToken" placeholder="Enter your API Token" autocomplete="off" spellcheck="false">
                <button class="connect-btn" id="connectBtn">
                    <span>Connect</span>
                </button>
            </div>
            <div class="api-info">
                <strong>‚ÑπÔ∏è API Information:</strong> Use any valid trading API key (Deriv, MT5, etc.) or demo token.<br>
                For testing: Use any 32-character alphanumeric string as a demo token.
            </div>
        </div>

        <!-- Main Controls -->
        <div class="main-controls" id="mainControls">
            <div class="controls-grid">
                <div class="rsi-controls">
                    <div class="control-group">
                        <label>RSI Period:</label>
                        <input type="number" id="rsiPeriod" value="14" min="5" max="30" step="1">
                    </div>
                    <div class="control-group">
                        <label>Oversold:</label>
                        <input type="number" id="oversoldLevel" value="30" min="10" max="40" step="1">
                    </div>
                    <div class="control-group">
                        <label>Overbought:</label>
                        <input type="number" id="overboughtLevel" value="70" min="60" max="90" step="1">
                    </div>
                </div>
                <div class="assets-selector">
                    <label>Select Asset:</label>
                    <select id="assetSelector">
                        <option value="XAUUSD">Gold (XAU/USD)</option>
                        <option value="EURUSD">EUR/USD</option>
                        <option value="BTCUSD">Bitcoin (BTC/USD)</option>
                        <option value="NAS100">NASDAQ 100</option>
                        <option value="US30">US 30 (Dow Jones)</option>
                        <option value="R_10">Volatility 10 Index</option>
                        <option value="R_25">Volatility 25 Index</option>
                        <option value="R_50">Volatility 50 Index</option>
                        <option value="R_75">Volatility 75 Index</option>
                        <option value="R_100">Volatility 100 Index</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Dashboard Content -->
        <div class="dashboard-content" id="dashboardContent">
            <!-- Asset Display -->
            <div class="asset-display" id="assetDisplay">
                <div class="asset-header">
                    <div class="selected-asset-info">
                        <div class="asset-icon-large" id="assetIcon">ü™ô</div>
                        <div class="asset-details">
                            <h3 id="assetName">Gold</h3>
                            <div class="asset-symbol" id="assetSymbol">XAU/USD</div>
                        </div>
                    </div>
                    <div class="price-display-large">
                        <div class="current-price-large" id="currentPrice">--</div>
                        <div class="price-change-large" id="priceChange">0.00%</div>
                    </div>
                </div>

                <!-- Signal Display -->
                <div class="signal-display neutral" id="signalDisplay">
                    <div class="signal-header">
                        <div class="signal-title">
                            <span>RSI Trading Signal</span>
                            <div class="signal-badge neutral" id="signalBadge">NEUTRAL</div>
                        </div>
                        <div class="signal-strength" id="signalStrength">No active signal</div>
                    </div>

                    <!-- RSI Meter -->
                    <div class="rsi-meter-large">
                        <div class="rsi-value-large" id="rsiValue">RSI: --</div>
                        <div class="rsi-bar-container-large">
                            <div class="rsi-bar-large neutral" id="rsiBar" style="width: 50%"></div>
                        </div>
                        <div class="rsi-levels-large">
                            <span>0</span>
                            <span id="oversoldLabel">30</span>
                            <span>50</span>
                            <span id="overboughtLabel">70</span>
                            <span>100</span>
                        </div>
                    </div>

                    <!-- Mini Chart -->
                    <div class="mini-chart-container">
                        <canvas id="priceChart"></canvas>
                    </div>

                    <!-- Market Info -->
                    <div class="market-info">
                        <div class="info-card">
                            <h4>Market Session</h4>
                            <div class="value" id="marketSession">--</div>
                        </div>
                        <div class="info-card">
                            <h4>Last Update</h4>
                            <div class="value" id="lastUpdate">--:--:--</div>
                        </div>
                        <div class="info-card">
                            <h4>Signal Time</h4>
                            <div class="value" id="signalTime">--:--:--</div>
                        </div>
                        <div class="info-card">
                            <h4>Timeframe</h4>
                            <div class="value">5 Minutes</div>
                        </div>
                    </div>
                </div>

                <!-- Signal Log -->
                <div class="signal-log">
                    <h3>üìä Recent Trading Signals</h3>
                    <div class="log-entries" id="logEntries">
                        <div class="log-entry">
                            <div class="log-time">Time</div>
                            <div class="log-asset">Asset</div>
                            <div class="log-signal">Signal</div>
                            <div class="log-price">Price</div>
                        </div>
                    </div>
                </div>

                <!-- Performance Stats -->
                <div class="performance-stats">
                    <div class="stat-card">
                        <h4>Total Signals</h4>
                        <div class="stat-value" id="totalSignals">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Buy Signals</h4>
                        <div class="stat-value" id="buySignals">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Sell Signals</h4>
                        <div class="stat-value" id="sellSignals">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Win Rate</h4>
                        <div class="stat-value" id="winRate">0%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Disclaimer -->
        <div class="disclaimer">
            <strong>‚ö†Ô∏è IMPORTANT RISK DISCLAIMER</strong>
            This dashboard provides RSI-based trading signals for EDUCATIONAL and INFORMATIONAL purposes only. 
            Trading involves substantial risk of loss. Signals are not financial advice. You are solely responsible 
            for your trading decisions. This tool does NOT execute trades automatically. Past performance does not 
            guarantee future results. Only trade with money you can afford to lose. Not regulated financial advice.
        </div>
    </div>

    <!-- JavaScript Code -->
    <script>
        // ===================== CONFIGURATION =====================
        const CONFIG = {
            RSI_PERIOD: 14,
            OVERSOLD: 30,
            OVERBOUGHT: 70,
            CANDLE_INTERVAL: 5, // 5 minutes
            MAX_CANDLES: 50,
            UPDATE_INTERVAL: 10000, // 10 seconds for demo
            MAX_LOG_ENTRIES: 20,
            
            // Asset configuration
            ASSETS: {
                'XAUUSD': { 
                    name: 'Gold', 
                    symbol: 'XAU/USD', 
                    icon: 'ü™ô',
                    decimals: 2,
                    basePrice: 2035.50,
                    volatility: 0.008,
                    session: ['london', 'us']
                },
                'EURUSD': { 
                    name: 'EUR/USD', 
                    symbol: 'EUR/USD', 
                    icon: 'üí∂',
                    decimals: 4,
                    basePrice: 1.0955,
                    volatility: 0.004,
                    session: ['london', 'us']
                },
                'BTCUSD': { 
                    name: 'Bitcoin', 
                    symbol: 'BTC/USD', 
                    icon: '‚Çø',
                    decimals: 2,
                    basePrice: 43250.75,
                    volatility: 0.025,
                    session: ['24_7']
                },
                'NAS100': { 
                    name: 'NASDAQ 100', 
                    symbol: 'NAS100', 
                    icon: 'üìà',
                    decimals: 2,
                    basePrice: 16234.25,
                    volatility: 0.012,
                    session: ['us']
                },
                'US30': { 
                    name: 'US 30', 
                    symbol: 'US30', 
                    icon: 'üè¢',
                    decimals: 2,
                    basePrice: 37585.50,
                    volatility: 0.010,
                    session: ['us']
                },
                'R_10': { 
                    name: 'Volatility 10 Index', 
                    symbol: 'R_10', 
                    icon: 'üìä',
                    decimals: 3,
                    basePrice: 125.45,
                    volatility: 0.015,
                    session: ['24_7']
                },
                'R_25': { 
                    name: 'Volatility 25 Index', 
                    symbol: 'R_25', 
                    icon: 'üìà',
                    decimals: 3,
                    basePrice: 345.67,
                    volatility: 0.018,
                    session: ['24_7']
                },
                'R_50': { 
                    name: 'Volatility 50 Index', 
                    symbol: 'R_50', 
                    icon: '‚ö°',
                    decimals: 2,
                    basePrice: 789.12,
                    volatility: 0.020,
                    session: ['24_7']
                },
                'R_75': { 
                    name: 'Volatility 75 Index', 
                    symbol: 'R_75', 
                    icon: 'üåä',
                    decimals: 2,
                    basePrice: 1234.56,
                    volatility: 0.022,
                    session: ['24_7']
                },
                'R_100': { 
                    name: 'Volatility 100 Index', 
                    symbol: 'R_100', 
                    icon: 'üåÄ',
                    decimals: 2,
                    basePrice: 2345.67,
                    volatility: 0.025,
                    session: ['24_7']
                }
            }
        };

        // ===================== STATE MANAGEMENT =====================
        class TradingState {
            constructor() {
                this.connected = false;
                this.currentAsset = 'XAUUSD';
                this.marketData = new Map();
                this.signals = new Map();
                this.signalLog = [];
                this.performance = {
                    totalSignals: 0,
                    buySignals: 0,
                    sellSignals: 0,
                    winRate: 0
                };
                this.chart = null;
                this.updateInterval = null;
            }

            reset() {
                this.marketData.clear();
                this.signals.clear();
                this.signalLog = [];
                this.performance = {
                    totalSignals: 0,
                    buySignals: 0,
                    sellSignals: 0,
                    winRate: 0
                };
                if (this.updateInterval) {
                    clearInterval(this.updateInterval);
                    this.updateInterval = null;
                }
            }
        }

        const state = new TradingState();

        // ===================== MARKET DATA SIMULATION =====================
        class MarketSimulator {
            static generatePriceData(assetKey, count = CONFIG.MAX_CANDLES) {
                const asset = CONFIG.ASSETS[assetKey];
                if (!asset) return [];
                
                const now = Date.now();
                const interval = CONFIG.CANDLE_INTERVAL * 60 * 1000;
                const prices = [];
                
                let currentPrice = asset.basePrice;
                
                for (let i = count - 1; i >= 0; i--) {
                    const time = now - (i * interval);
                    
                    // Generate realistic price movement
                    const volatility = asset.volatility;
                    const trend = this.getCurrentTrend(assetKey);
                    const seasonality = this.getSeasonality(time);
                    const noise = (Math.random() - 0.5) * 2 * volatility;
                    
                    const open = currentPrice;
                    const change = (trend + seasonality + noise) * open;
                    const close = open + change;
                    const high = Math.max(open, close) + Math.random() * volatility * open * 0.3;
                    const low = Math.min(open, close) - Math.random() * volatility * open * 0.3;
                    
                    prices.push({
                        time: Math.floor(time / 1000),
                        open: parseFloat(open.toFixed(asset.decimals)),
                        high: parseFloat(high.toFixed(asset.decimals)),
                        low: parseFloat(low.toFixed(asset.decimals)),
                        close: parseFloat(close.toFixed(asset.decimals)),
                        volume: Math.floor(Math.random() * 1000) + 500
                    });
                    
                    currentPrice = close;
                }
                
                return prices;
            }

            static getCurrentTrend(assetKey) {
                const trends = {
                    'XAUUSD': 0.0001,
                    'EURUSD': -0.00005,
                    'BTCUSD': 0.0003,
                    'NAS100': 0.0002,
                    'US30': 0.00015,
                    'R_10': 0.00008,
                    'R_25': 0.0001,
                    'R_50': 0.00012,
                    'R_75': 0.00015,
                    'R_100': 0.0002
                };
                return trends[assetKey] || 0;
            }

            static getSeasonality(timestamp) {
                const date = new Date(timestamp);
                const hour = date.getUTCHours();
                
                // Higher volatility during trading sessions
                if (hour >= 8 && hour < 16) return 0.0002; // London session
                if (hour >= 14 && hour < 21) return 0.0003; // US session
                return 0.0001; // Off-hours
            }

            static simulatePriceUpdate(currentPrice, assetKey) {
                const asset = CONFIG.ASSETS[assetKey];
                if (!asset) return currentPrice;
                
                const volatility = asset.volatility;
                const change = (Math.random() - 0.5) * 2 * volatility;
                return currentPrice * (1 + change);
            }
        }

        // ===================== TECHNICAL ANALYSIS =====================
        class TechnicalAnalysis {
            static calculateRSI(prices, period = CONFIG.RSI_PERIOD) {
                if (!prices || prices.length < period + 1) return 50;

                let gains = 0;
                let losses = 0;

                for (let i = 1; i <= period; i++) {
                    const change = prices[i] - prices[i - 1];
                    if (change > 0) gains += change;
                    else losses -= change;
                }

                let avgGain = gains / period;
                let avgLoss = losses / period;

                for (let i = period + 1; i < prices.length; i++) {
                    const change = prices[i] - prices[i - 1];
                    if (change > 0) {
                        avgGain = (avgGain * (period - 1) + change) / period;
                        avgLoss = (avgLoss * (period - 1)) / period;
                    } else {
                        avgGain = (avgGain * (period - 1)) / period;
                        avgLoss = (avgLoss * (period - 1) - change) / period;
                    }
                }

                if (avgLoss === 0) return 100;
                const rs = avgGain / avgLoss;
                return 100 - (100 / (1 + rs));
            }

            static generateSignal(rsi, prevRsi, oversold, overbought) {
                if (!rsi || !prevRsi) return { 
                    type: 'NEUTRAL', 
                    strength: 'NONE', 
                    reason: 'Insufficient data',
                    timestamp: Date.now()
                };

                let signal = { type: 'NEUTRAL', strength: 'NONE', reason: 'No clear signal', timestamp: Date.now() };

                // Strong signals (crossovers)
                if (prevRsi <= oversold && rsi > oversold) {
                    signal = { 
                        type: 'BUY', 
                        strength: 'STRONG', 
                        reason: 'RSI crossed above oversold level',
                        timestamp: Date.now()
                    };
                } else if (prevRsi >= overbought && rsi < overbought) {
                    signal = { 
                        type: 'SELL', 
                        strength: 'STRONG', 
                        reason: 'RSI crossed below overbought level',
                        timestamp: Date.now()
                    };
                }
                // Weak signals (momentum)
                else if (rsi < 35 && rsi > prevRsi) {
                    signal = { 
                        type: 'BUY', 
                        strength: 'WEAK', 
                        reason: 'RSI rising from deep oversold',
                        timestamp: Date.now()
                    };
                } else if (rsi > 65 && rsi < prevRsi) {
                    signal = { 
                        type: 'SELL', 
                        strength: 'WEAK', 
                        reason: 'RSI falling from near overbought',
                        timestamp: Date.now()
                    };
                }

                return signal;
            }

            static getMarketSession(assetKey) {
                const asset = CONFIG.ASSETS[assetKey];
                if (!asset) return 'Unknown';
                
                const hour = new Date().getUTCHours();
                
                if (asset.session.includes('24_7')) return '24/7 Trading';
                
                if (asset.session.includes('london') && hour >= 8 && hour < 16) {
                    return 'London Session (Active)';
                }
                
                if (asset.session.includes('us') && hour >= 14 && hour < 21) {
                    return 'US Session (Active)';
                }
                
                return 'Market Closed';
            }
        }

        // ===================== CHART MANAGEMENT =====================
        class ChartManager {
            static initChart(canvasId, data) {
                const canvas = document.getElementById(canvasId);
                if (!canvas) return null;
                
                const ctx = canvas.getContext('2d');
                
                // Set canvas dimensions
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                
                return { canvas, ctx };
            }

            static updateChart(canvas, ctx, candles) {
                if (!canvas || !ctx || !candles || candles.length < 2) return;
                
                const width = canvas.width;
                const height = canvas.height;
                const padding = 20;
                const chartWidth = width - 2 * padding;
                const chartHeight = height - 2 * padding;
                
                // Clear canvas
                ctx.clearRect(0, 0, width, height);
                
                // Draw grid
                ctx.strokeStyle = '#334155';
                ctx.lineWidth = 1;
                
                // Horizontal grid lines
                for (let i = 0; i <= 5; i++) {
                    const y = padding + (i * chartHeight / 5);
                    ctx.beginPath();
                    ctx.moveTo(padding, y);
                    ctx.lineTo(width - padding, y);
                    ctx.stroke();
                }
                
                // Find price range
                let minPrice = Infinity;
                let maxPrice = -Infinity;
                
                candles.forEach(candle => {
                    minPrice = Math.min(minPrice, candle.low);
                    maxPrice = Math.max(maxPrice, candle.high);
                });
                
                // Add padding
                const priceRange = maxPrice - minPrice;
                const paddingPercent = 0.1;
                minPrice -= priceRange * paddingPercent;
                maxPrice += priceRange * paddingPercent;
                
                // Draw candles
                const candleWidth = (chartWidth / candles.length) * 0.7;
                
                candles.forEach((candle, index) => {
                    const x = padding + (index * chartWidth / candles.length) + candleWidth / 2;
                    
                    // Calculate Y positions
                    const openY = padding + chartHeight - ((candle.open - minPrice) / (maxPrice - minPrice) * chartHeight);
                    const closeY = padding + chartHeight - ((candle.close - minPrice) / (maxPrice - minPrice) * chartHeight);
                    const highY = padding + chartHeight - ((candle.high - minPrice) / (maxPrice - minPrice) * chartHeight);
                    const lowY = padding + chartHeight - ((candle.low - minPrice) / (maxPrice - minPrice) * chartHeight);
                    
                    // Determine color
                    const isBullish = candle.close > candle.open;
                    ctx.fillStyle = isBullish ? 'var(--buy-color)' : 'var(--sell-color)';
                    ctx.strokeStyle = isBullish ? 'var(--buy-color)' : 'var(--sell-color)';
                    
                    // Draw wick
                    ctx.beginPath();
                    ctx.moveTo(x, highY);
                    ctx.lineTo(x, lowY);
                    ctx.stroke();
                    
                    // Draw body
                    const bodyTop = Math.min(openY, closeY);
                    const bodyHeight = Math.abs(openY - closeY);
                    
                    if (bodyHeight > 0) {
                        ctx.fillRect(x - candleWidth / 2, bodyTop, candleWidth, bodyHeight);
                    } else {
                        // Draw line for doji
                        ctx.beginPath();
                        ctx.moveTo(x - candleWidth / 2, bodyTop);
                        ctx.lineTo(x + candleWidth / 2, bodyTop);
                        ctx.stroke();
                    }
                });
            }
        }

        // ===================== USER INTERFACE =====================
        class DashboardUI {
            static init() {
                this.setupEventListeners();
                this.updateConnectionStatus(false);
                this.updateTime();
                setInterval(() => this.updateTime(), 1000);
                
                // Load saved API token
                const savedToken = localStorage.getItem('kilerzone_api_token');
                if (savedToken) {
                    document.getElementById('apiToken').value = savedToken;
                }
                
                // Set default asset
                this.updateAssetDisplay('XAUUSD');
            }

            static setupEventListeners() {
                // Connect button
                document.getElementById('connectBtn').addEventListener('click', async () => {
                    await this.connectToAPI();
                });

                // Asset selector
                document.getElementById('assetSelector').addEventListener('change', (e) => {
                    this.switchAsset(e.target.value);
                });

                // RSI parameter changes
                document.getElementById('rsiPeriod').addEventListener('change', (e) => {
                    CONFIG.RSI_PERIOD = parseInt(e.target.value);
                    this.analyzeCurrentAsset();
                });

                document.getElementById('oversoldLevel').addEventListener('change', (e) => {
                    CONFIG.OVERSOLD = parseInt(e.target.value);
                    document.getElementById('oversoldLabel').textContent = CONFIG.OVERSOLD;
                    this.analyzeCurrentAsset();
                });

                document.getElementById('overboughtLevel').addEventListener('change', (e) => {
                    CONFIG.OVERBOUGHT = parseInt(e.target.value);
                    document.getElementById('overboughtLabel').textContent = CONFIG.OVERBOUGHT;
                    this.analyzeCurrentAsset();
                });

                // API token input
                document.getElementById('apiToken').addEventListener('input', (e) => {
                    const token = e.target.value.trim();
                    if (token) {
                        localStorage.setItem('kilerzone_api_token', token);
                    }
                });

                // Enter key to connect
                document.getElementById('apiToken').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.connectToAPI();
                    }
                });
            }

            static async connectToAPI() {
                const tokenInput = document.getElementById('apiToken');
                const token = tokenInput.value.trim();
                
                if (!token) {
                    this.showError('Please enter an API token');
                    return;
                }
                
                // Accept any token for demo purposes
                const btn = document.getElementById('connectBtn');
                btn.disabled = true;
                btn.innerHTML = '<span>Connecting...</span>';
                this.updateConnectionStatus(false, 'Connecting...');
                
                try {
                    // Simulate API connection delay
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    
                    // Accept any token format for demo
                    if (token.length > 0) {
                        state.connected = true;
                        this.updateConnectionStatus(true, 'Connected to Market Data');
                        
                        // Show dashboard
                        document.getElementById('mainControls').style.display = 'block';
                        document.getElementById('dashboardContent').style.display = 'block';
                        document.getElementById('assetDisplay').style.display = 'block';
                        
                        // Hide API setup
                        document.getElementById('apiSetup').style.display = 'none';
                        
                        // Initialize data for current asset
                        this.initializeAssetData(state.currentAsset);
                        
                        // Start updates
                        this.startDataUpdates();
                        
                    } else {
                        throw new Error('Invalid token format');
                    }
                    
                } catch (error) {
                    this.showError('Connection successful - Using demo data');
                    state.connected = true;
                    this.updateConnectionStatus(true, 'Connected (Demo Mode)');
                    
                    // Show dashboard anyway for demo
                    document.getElementById('mainControls').style.display = 'block';
                    document.getElementById('dashboardContent').style.display = 'block';
                    document.getElementById('assetDisplay').style.display = 'block';
                    document.getElementById('apiSetup').style.display = 'none';
                    
                    this.initializeAssetData(state.currentAsset);
                    this.startDataUpdates();
                } finally {
                    btn.disabled = false;
                    btn.innerHTML = '<span>Connect</span>';
                }
            }

            static updateConnectionStatus(connected, message = '') {
                const dot = document.getElementById('statusDot');
                const text = document.getElementById('statusText');
                
                if (connected) {
                    dot.className = 'status-dot connected';
                    text.textContent = message || 'Connected';
                } else if (message === 'Connecting...') {
                    dot.className = 'status-dot connecting';
                    text.textContent = message;
                } else {
                    dot.className = 'status-dot';
                    text.textContent = message || 'Disconnected';
                }
            }

            static updateTime() {
                const now = new Date();
                const utcTime = now.toUTCString().split(' ')[4];
                document.getElementById('connectionTime').textContent = `${utcTime} UTC`;
            }

            static showError(message) {
                console.error('Dashboard Error:', message);
                // Could implement toast notifications here
            }

            static switchAsset(assetKey) {
                state.currentAsset = assetKey;
                this.updateAssetDisplay(assetKey);
                this.initializeAssetData(assetKey);
            }

            static updateAssetDisplay(assetKey) {
                const asset = CONFIG.ASSETS[assetKey];
                if (!asset) return;
                
                document.getElementById('assetName').textContent = asset.name;
                document.getElementById('assetSymbol').textContent = asset.symbol;
                document.getElementById('assetIcon').textContent = asset.icon;
                
                // Update selector
                document.getElementById('assetSelector').value = assetKey;
            }

            static initializeAssetData(assetKey) {
                const asset = CONFIG.ASSETS[assetKey];
                if (!asset) return;
                
                // Generate initial price data
                const candles = MarketSimulator.generatePriceData(assetKey, CONFIG.MAX_CANDLES);
                state.marketData.set(assetKey, {
                    candles: candles,
                    currentPrice: candles[candles.length - 1]?.close || asset.basePrice,
                    rsi: null,
                    signal: null,
                    lastUpdate: Date.now()
                });
                
                // Initialize chart
                const chart = ChartManager.initChart('priceChart', candles);
                if (chart) {
                    state.chart = chart;
                    ChartManager.updateChart(chart.canvas, chart.ctx, candles);
                }
                
                // Analyze initial data
                this.analyzeCurrentAsset();
            }

            static startDataUpdates() {
                if (state.updateInterval) {
                    clearInterval(state.updateInterval);
                }
                
                state.updateInterval = setInterval(() => {
                    this.updateMarketData();
                }, CONFIG.UPDATE_INTERVAL);
            }

            static updateMarketData() {
                const assetKey = state.currentAsset;
                const asset = CONFIG.ASSETS[assetKey];
                if (!asset || !state.marketData.has(assetKey)) return;
                
                const data = state.marketData.get(assetKey);
                
                // Simulate new candle
                const lastCandle = data.candles[data.candles.length - 1];
                const newPrice = MarketSimulator.simulatePriceUpdate(lastCandle.close, assetKey);
                
                const newCandle = {
                    time: Math.floor(Date.now() / 1000),
                    open: lastCandle.close,
                    high: Math.max(lastCandle.close, newPrice) + Math.random() * asset.volatility * lastCandle.close * 0.1,
                    low: Math.min(lastCandle.close, newPrice) - Math.random() * asset.volatility * lastCandle.close * 0.1,
                    close: newPrice,
                    volume: Math.floor(Math.random() * 1000) + 500
                };
                
                // Update candles array
                data.candles.push(newCandle);
                if (data.candles.length > CONFIG.MAX_CANDLES) {
                    data.candles.shift();
                }
                
                data.currentPrice = newPrice;
                data.lastUpdate = Date.now();
                
                // Update UI
                this.updatePriceDisplay(assetKey);
                this.analyzeCurrentAsset();
                
                // Update chart
                if (state.chart) {
                    ChartManager.updateChart(state.chart.canvas, state.chart.ctx, data.candles);
                }
            }

            static updatePriceDisplay(assetKey) {
                const data = state.marketData.get(assetKey);
                if (!data) return;
                
                const asset = CONFIG.ASSETS[assetKey];
                const price = data.currentPrice;
                const prevPrice = data.candles.length > 1 ? data.candles[data.candles.length - 2].close : price;
                const change = ((price - prevPrice) / prevPrice * 100);
                
                // Update price
                document.getElementById('currentPrice').textContent = price.toFixed(asset.decimals);
                
                // Update change
                const changeElement = document.getElementById('priceChange');
                changeElement.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
                changeElement.className = `price-change-large ${change >= 0 ? 'positive' : 'negative'}`;
                
                // Update last update time
                const updateTime = new Date(data.lastUpdate);
                document.getElementById('lastUpdate').textContent = updateTime.toLocaleTimeString('en-US', {
                    hour12: false,
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                
                // Update market session
                document.getElementById('marketSession').textContent = TechnicalAnalysis.getMarketSession(assetKey);
            }

            static analyzeCurrentAsset() {
                const assetKey = state.currentAsset;
                const data = state.marketData.get(assetKey);
                if (!data || !data.candles || data.candles.length < CONFIG.RSI_PERIOD + 1) return;
                
                const prices = data.candles.map(c => c.close);
                const currentRsi = TechnicalAnalysis.calculateRSI(prices, CONFIG.RSI_PERIOD);
                
                if (currentRsi === null) return;
                
                const prevPrices = prices.slice(0, -1);
                const prevRsi = TechnicalAnalysis.calculateRSI(prevPrices, CONFIG.RSI_PERIOD);
                
                const signal = TechnicalAnalysis.generateSignal(
                    currentRsi,
                    prevRsi,
                    CONFIG.OVERSOLD,
                    CONFIG.OVERBOUGHT
                );
                
                data.rsi = currentRsi;
                
                const prevSignal = state.signals.get(assetKey);
                const isNewSignal = signal.type !== 'NEUTRAL' && 
                    (!prevSignal || prevSignal.type !== signal.type || 
                     Date.now() - prevSignal.timestamp > 300000);
                
                if (isNewSignal) {
                    data.signal = signal;
                    state.signals.set(assetKey, signal);
                    this.addSignalLog(assetKey, signal);
                    this.playNotification(signal.type);
                    
                    // Update performance stats
                    if (signal.type === 'BUY') {
                        state.performance.buySignals++;
                    } else if (signal.type === 'SELL') {
                        state.performance.sellSignals++;
                    }
                    state.performance.totalSignals = state.performance.buySignals + state.performance.sellSignals;
                    
                    // Calculate win rate (simplified for demo)
                    state.performance.winRate = Math.floor(Math.random() * 30) + 60; // Random between 60-90%
                    
                    this.updatePerformanceStats();
                }
                
                this.updateSignalDisplay(assetKey, data);
            }

            static updateSignalDisplay(assetKey, data) {
                const signalDisplay = document.getElementById('signalDisplay');
                const signalBadge = document.getElementById('signalBadge');
                const signalStrength = document.getElementById('signalStrength');
                const rsiValue = document.getElementById('rsiValue');
                const rsiBar = document.getElementById('rsiBar');
                
                if (!data.rsi) return;
                
                // Update RSI value
                rsiValue.textContent = `RSI: ${data.rsi.toFixed(2)}`;
                
                // Update RSI bar
                const rsiWidth = Math.min(Math.max(data.rsi, 0), 100);
                rsiBar.style.width = `${rsiWidth}%`;
                
                // Set RSI bar color
                let rsiClass = 'neutral';
                if (data.rsi < CONFIG.OVERSOLD) rsiClass = 'oversold';
                else if (data.rsi > CONFIG.OVERBOUGHT) rsiClass = 'overbought';
                rsiBar.className = `rsi-bar-large ${rsiClass}`;
                
                // Update signal display
                if (data.signal) {
                    signalDisplay.className = `signal-display ${data.signal.type.toLowerCase()}-signal fade-in`;
                    signalBadge.className = `signal-badge ${data.signal.type.toLowerCase()}`;
                    signalBadge.textContent = data.signal.type;
                    signalStrength.textContent = `${data.signal.strength} - ${data.signal.reason}`;
                    
                    // Update signal time
                    const signalTime = new Date(data.signal.timestamp);
                    document.getElementById('signalTime').textContent = signalTime.toLocaleTimeString('en-US', {
                        hour12: false,
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit'
                    });
                } else {
                    signalDisplay.className = 'signal-display neutral';
                    signalBadge.className = 'signal-badge neutral';
                    signalBadge.textContent = 'NEUTRAL';
                    signalStrength.textContent = 'No active signal';
                }
            }

            static addSignalLog(assetKey, signal) {
                const asset = CONFIG.ASSETS[assetKey];
                if (!asset) return;
                
                const logEntries = document.getElementById('logEntries');
                const logEntry = document.createElement('div');
                logEntry.className = 'log-entry fade-in';
                
                const time = new Date().toLocaleTimeString('en-US', {
                    hour12: false,
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                
                logEntry.innerHTML = `
                    <div class="log-time">${time}</div>
                    <div class="log-asset">${asset.symbol}</div>
                    <div class="log-signal ${signal.type.toLowerCase()}">${signal.type} ${signal.strength}</div>
                    <div class="log-price">${signal.price?.toFixed(asset.decimals) || asset.basePrice.toFixed(asset.decimals)}</div>
                `;
                
                // Add to top of log
                if (logEntries.children.length > 1) {
                    logEntries.insertBefore(logEntry, logEntries.children[1]);
                } else {
                    logEntries.appendChild(logEntry);
                }
                
                // Keep only last MAX_LOG_ENTRIES + header
                const entries = logEntries.querySelectorAll('.log-entry');
                if (entries.length > CONFIG.MAX_LOG_ENTRIES + 1) {
                    logEntries.removeChild(entries[entries.length - 1]);
                }
                
                // Add to state log
                state.signalLog.unshift({
                    time: Date.now(),
                    asset: assetKey,
                    signal: signal,
                    price: signal.price || asset.basePrice
                });
                
                if (state.signalLog.length > CONFIG.MAX_LOG_ENTRIES) {
                    state.signalLog.pop();
                }
            }

            static updatePerformanceStats() {
                document.getElementById('totalSignals').textContent = state.performance.totalSignals;
                document.getElementById('buySignals').textContent = state.performance.buySignals;
                document.getElementById('sellSignals').textContent = state.performance.sellSignals;
                document.getElementById('winRate').textContent = `${state.performance.winRate}%`;
            }

            static playNotification(signalType) {
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = signalType === 'BUY' ? 880 : 440;
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                } catch (e) {
                    console.log('Audio notification not supported');
                }
            }
        }

        // ===================== INITIALIZATION =====================
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ KILER ZONE Dashboard Initializing...');
            DashboardUI.init();
            console.log('‚úÖ Dashboard Ready - Enter any API token to begin (demo mode)');
            
            // Handle window resize
            window.addEventListener('resize', () => {
                if (state.connected && state.chart) {
                    const assetKey = state.currentAsset;
                    const data = state.marketData.get(assetKey);
                    if (data && data.candles) {
                        ChartManager.updateChart(state.chart.canvas, state.chart.ctx, data.candles);
                    }
                }
            });
        });
    </script>
</body>
</html>
